<!-- 插件配置文件。阅读更多：https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- 插件的唯一标识符。必须在全球范围内唯一，通常使用反写域名格式。 -->
    <id>org.jetbrains.plugins.template</id>
    <!-- 插件在插件市场和 IDE 设置中显示的名称。 -->
    <name>OverCode</name>
    <!-- 插件的开发商或作者信息。 -->
    <vendor>GuoFan</vendor>

    <!-- 依赖声明。com.intellij.modules.platform 表示该插件依赖于所有 IntelliJ IDE 共有的基础平台功能。 -->
    <depends>com.intellij.modules.platform</depends>

    <!-- 国际化资源包。指向 src/main/resources/messages/MyBundle.properties，用于管理多语言文案。 -->
    <resource-bundle>messages.MyBundle</resource-bundle>

    <!-- 扩展点 (Extensions) 注册。这是插件功能的核心入口，用于声明工具窗口、启动活动、服务等。 -->
    <extensions defaultExtensionNs="com.intellij">

        <!-- Over Code 聊天界面工具窗口 -->
        <toolWindow factoryClass="com.github.bboygf.over_code.ui.home.OverCoderHomeWindowFactory"
                    id="Over Code"
                    anchor="right"
                    icon="AllIcons.Toolwindows.ToolWindowMessages"/>
        
        <!-- 注册一个在项目打开并启动完成后执行的任务 -->
        <postStartupActivity implementation="com.github.bboygf.over_code.startup.InitProjectActivity" />
        
        <!-- 注册模型配置设置页面 -->
        <projectConfigurable
                parentId="tools"
                provider="com.github.bboygf.over_code.ui.model_config.ModelConfigurableProvider"
                id="com.github.bboygf.over_code.ui.model_config.ModelConfigurable"
                displayName="Over Code 模型配置"/>
    </extensions>

    <!-- 动作 (Actions) 注册。用于声明菜单项、工具栏按钮、快捷键操作等。 -->
    <actions>
        <!-- 增加一个按钮 (Action) -->
        <!-- id: 动作的唯一标识；class: 对应的处理类；text: 菜单上显示的文字；description: 状态栏显示的详细说明 -->
        <action id="org.jetbrains.plugins.template.HelloAction"
                class="com.github.bboygf.over_code.actions.HelloAction"
                text="Say Hello from OverCode"
                description="Prints a hello message to the user and logs the event.">
            <!-- 添加到 IDE 顶部的 Tools (工具) 菜单 -->
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <!-- 添加到编辑器代码区的右键菜单（置顶显示） -->
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <!-- 添加到左侧 Project 项目视图的右键菜单 -->
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        
        <!-- 询问AI - 将选中的代码发送到聊天窗口 -->
        <action id="com.github.bboygf.over_code.AskAIAction"
                class="com.github.bboygf.over_code.actions.AskAIAction"
                text="询问 AI (解释代码)"
                description="将选中的代码发送到 Over Code 聊天窗口，让 AI 帮你解释代码的意思">
            <!-- 添加到编辑器代码区的右键菜单（置顶显示） -->
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <!-- 添加快捷键：Ctrl+Alt+A -->
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt A"/>
        </action>
    </actions>
</idea-plugin>
